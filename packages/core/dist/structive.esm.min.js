function t(t){if("string"==typeof t)throw new Error(t);const{message:e,code:n,context:s,hint:o,t:r,o:i,i:c}=t,d=new Error(e);throw d.code=n,s&&(d.context=s),o&&(d.hint=o),r&&(d.t=r),i&&(d.o=i),c&&(d.i=c),d}const e={debug:!1,locale:"en-US",shadowDomMode:"auto",enableMainWrapper:!0,enableRouter:!0,autoInsertMainWrapper:!1,autoInit:!0,mainTagName:"app-main",routerTagName:"view-router",layoutPath:"",autoLoadFromImportMap:!1};function n(){return e}const s=n(),o=(t,e)=>({l:t,h:e});function r(e){t({code:"FLT-202",message:`${e} requires at least one option`,context:o("Filter.optionsRequired",e),t:"./docs/error-codes.md#flt"})}function i(e){t({code:"FLT-202",message:`${e} requires a number as option`,context:o("Filter.optionMustBeNumber",e),t:"./docs/error-codes.md#flt"})}function c(e){t({code:"FLT-202",message:`${e} requires a number value`,context:o("Filter.valueMustBeNumber",e),t:"./docs/error-codes.md#flt"})}function d(e){t({code:"FLT-202",message:`${e} requires a date value`,context:o("Filter.valueMustBeDate",e),t:"./docs/error-codes.md#flt"})}const a=n();function l(t){return!(!t||isNaN(Number(t)))}const h={eq:t=>{const e=t?.[0]??r("eq");return t=>"number"==typeof t?(l(e)||i("eq"),t===Number(e)):t===e},ne:t=>{const e=t?.[0]??r("ne");return t=>"number"==typeof t?(l(e)||i("ne"),t!==Number(e)):t!==e},not:e=>e=>{var n;return"boolean"!=typeof e&&t({code:"FLT-202",message:`${n="not"} requires a boolean value`,context:o("Filter.valueMustBeBoolean",n),t:"./docs/error-codes.md#flt"}),!e},lt:t=>{const e=t?.[0]??r("lt");return l(e)||i("lt"),t=>("number"!=typeof t&&c("lt"),t<Number(e))},le:t=>{const e=t?.[0]??r("le");return l(e)||i("le"),t=>("number"!=typeof t&&c("le"),t<=Number(e))},gt:t=>{const e=t?.[0]??r("gt");return l(e)||i("gt"),t=>("number"!=typeof t&&c("gt"),t>Number(e))},ge:t=>{const e=t?.[0]??r("ge");return l(e)||i("ge"),t=>("number"!=typeof t&&c("ge"),t>=Number(e))},inc:t=>{const e=t?.[0]??r("inc");return l(e)||i("inc"),t=>("number"!=typeof t&&c("inc"),t+Number(e))},dec:t=>{const e=t?.[0]??r("dec");return l(e)||i("dec"),t=>("number"!=typeof t&&c("dec"),t-Number(e))},mul:t=>{const e=t?.[0]??r("mul");return l(e)||i("mul"),t=>("number"!=typeof t&&c("mul"),t*Number(e))},div:t=>{const e=t?.[0]??r("div");return l(e)||i("div"),t=>("number"!=typeof t&&c("div"),t/Number(e))},mod:t=>{const e=t?.[0]??r("mod");return l(e)||i("mod"),t=>("number"!=typeof t&&c("mod"),t%Number(e))},fix:t=>{const e=t?.[0]??"0";return l(e)||i("fix"),t=>("number"!=typeof t&&c("fix"),t.toFixed(Number(e)))},locale:t=>{const e=t?.[0]??a.locale;return t=>("number"!=typeof t&&c("locale"),t.toLocaleString(e))},uc:t=>t=>String(t).toUpperCase(),lc:t=>t=>String(t).toLowerCase(),cap:t=>t=>{const e=String(t);return 0===e.length?e:1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)},trim:t=>t=>String(t).trim(),slice:t=>{const e=t?.[0]??r("slice");return l(e)||i("slice"),t=>String(t).slice(Number(e))},substr:t=>{const e=t?.[0]??r("substr");l(e)||i("substr");const n=t?.[1]??r("substr");return l(n)||i("substr"),t=>String(t).substr(Number(e),Number(n))},pad:t=>{const e=t?.[0]??r("pad");l(e)||i("pad");const n=t?.[1]??"0";return t=>String(t).padStart(Number(e),n)},rep:t=>{const e=t?.[0]??r("rep");return l(e)||i("rep"),t=>String(t).repeat(Number(e))},rev:t=>t=>String(t).split("").reverse().join(""),int:t=>t=>parseInt(String(t),10),float:t=>t=>parseFloat(String(t)),round:t=>{const e=t?.[0]??"0";return l(e)||i("round"),t=>{"number"!=typeof t&&c("round");const n=Math.pow(10,Number(e));return Math.round(t*n)/n}},floor:t=>{const e=t?.[0]??"0";return l(e)||i("floor"),t=>{"number"!=typeof t&&c("floor");const n=Math.pow(10,Number(e));return Math.floor(t*n)/n}},ceil:t=>{const e=t?.[0]??"0";return l(e)||i("ceil"),t=>{"number"!=typeof t&&c("ceil");const n=Math.pow(10,Number(e));return Math.ceil(t*n)/n}},percent:t=>{const e=t?.[0]??"0";return l(e)||i("percent"),t=>("number"!=typeof t&&c("percent"),`${(100*t).toFixed(Number(e))}%`)},date:t=>{const e=t?.[0]??a.locale;return t=>(t instanceof Date||d("date"),t.toLocaleDateString(e))},time:t=>{const e=t?.[0]??a.locale;return t=>(t instanceof Date||d("time"),t.toLocaleTimeString(e))},datetime:t=>{const e=t?.[0]??a.locale;return t=>(t instanceof Date||d("datetime"),t.toLocaleString(e))},ymd:t=>{const e=t?.[0]??"-";return t=>{t instanceof Date||d("ymd");const n=t.getFullYear().toString(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return`${n}${e}${s}${e}${o}`}},falsy:t=>t=>!1===t||null==t||0===t||""===t||Number.isNaN(t),truthy:t=>t=>!1!==t&&null!=t&&0!==t&&""!==t&&!Number.isNaN(t),defaults:t=>{const e=t?.[0]??r("defaults");return t=>!1===t||null==t||0===t||""===t||Number.isNaN(t)?e:t},boolean:t=>t=>Boolean(t),number:t=>t=>Number(t),string:t=>t=>String(t),null:t=>t=>""===t?null:t},u=h,f=h;let m=0;function p(){return++m}const g={};const w={};function x(t,e){const n=new CSSStyleSheet;n.replaceSync(e),function(t,e){w[t]=e}(t,n)}function y(t,e){let n=t;if(0===e.length)return n;for(let t=0;t<e.length&&(n=n?.childNodes[e[t]]??null,null!==n);t++);return n}function b(e,n){const s=e[n.name];return s||t({code:"FLT-201",message:`Filter not found: ${n.name}`,context:{l:"createFilters.textToFilter",name:n.name},t:"./docs/error-codes.md#flt"}),s(n.options)}const S=new Map;const C=new Map;function v(t,e){let n=C.get(t);n||(n=new Map,C.set(t,n));let s=n.get(e);return s||(s=function(t,e){let n=S.get(e);if(void 0===n){n=[];for(let s=0;s<e.length;s++)n.push(b(t,e[s]));S.set(e,n)}return n}(t,e),n.set(e,s)),s}class I{u;m;p;S;C;v;get node(){return this.m}get name(){return this.p}get I(){return this.S}get binding(){return this.u}get T(){return this.v}get filters(){return this.C}get N(){return[]}constructor(t,e,n,s,o,r){this.u=t,this.m=e,this.p=n,this.S=s,this.C=o,this.v=r}B(e){t({code:"BIND-301",message:"Binding assignValue not implemented",context:{l:"BindingNode.assignValue",name:this.name},t:"./docs/error-codes.md#bind"})}U(e,n){t({code:"BIND-301",message:"Binding updateElements not implemented",context:{l:"BindingNode.updateElements",name:this.name},t:"./docs/error-codes.md#bind"})}P(t){}$(t){const e=this.binding.M.L(t._,t.R);this.B(e)}A(){}D(){}get k(){return this.node instanceof HTMLSelectElement}get value(){return null}get F(){return null}}class T extends I{B(t){const e=this.node,n=null==t||"number"==typeof t&&Number.isNaN(t)?"":String(t);e.setAttribute(this.I,n)}}const N={},B="data-bind",U="@@:",P="@@|",$=new Set(["constructor","prototype","__proto__","toString","valueOf","hasOwnProperty","isPrototypeOf","watch","unwatch","eval","arguments","let","var","const","class","function","null","true","false","new","return"]),L="$connectedCallback",M="$disconnectedCallback",E="$updatedCallback",_={};class R{static id=0;id=++R.id;V=this.id.toString();pattern;O;W;H;j;q;G;Z;J;K;X;Y;tt;et;nt;st;ot;rt;it;ct;dt;constructor(t){const e=e=>t===e?this:A(e),n=t.split("."),s=[],o=[],r=[],i={},c=[],d=[],a=[];let l="",h="",u=0;for(let t=0;t<n.length;t++)l+=n[t],"*"===n[t]&&(r.push(l),i[l]=u,c.push(e(l)),d.push(h),a.push(e(h)),u++),s.push(l),o.push(e(l)),h=l,l+=".";const f=r.length>0?r[r.length-1]:null,m=s.length>1?s[s.length-2]:null;this.pattern=t,this.O=n,this.W=n[n.length-1],this.H=s,this.j=new Set(s),this.q=o,this.G=new Set(o),this.Z=r,this.J=new Set(r),this.X=i,this.K=c,this.Y=new Set(c),this.tt=d,this.et=new Set(d),this.nt=a,this.st=new Set(a),this.ot=f,this.rt=f?e(f):null,this.it=m,this.ct=m?e(m):null,this.dt=u}}function A(e){$.has(e)&&t({code:"STATE-202",message:`Pattern is reserved word: ${e}`,context:{l:"StateProperty.getStructuredPathInfo",ht:e},t:"./docs/error-codes.md#state"});const n=_[e];return void 0!==n?n:_[e]=new R(e)}class D{it;ut;name;ft;level;constructor(t,e,n){this.it=t,this.ut=t?`${t}.${e}`:e,this.name=e,this.level=n,this.ft=new Map}find(t,e=0){if(e>=t.length)return null;const n=t[e],s=this.ft.get(n);return s?e===t.length-1?s:s.find(t,e+1):null}appendChild(t){let e=this.ft.get(t);if(!e){const n=this.it?`${this.it}.${this.name}`:this.name;e=new D(n,t,this.level+1),this.ft.set(t,e)}return e}}const k=new Map;function F(t,e){let n=k.get(t);n||(n=new Map,k.set(t,n));let s=n.get(e)??null;if(s)return s;const o=A(e);return s=t.find(o.O),n.set(e,s),s}function V(t,e){const n=A(e);if(null===n.it)return t.appendChild(e);{let e=F(t,n.it);return null===e&&(e=V(t,n.it)),e.appendChild(n.W)}}const O="state",W=Symbol.for(`${O}.GetByRef`),H=Symbol.for(`${O}.SetByRef`),j=Symbol.for(`${O}.ConnectedCallback`),q=Symbol.for(`${O}.DisconnectedCallback`),z=Symbol.for(`${O}.UpdatedCallback`),G=Symbol.for(`${O}.GetListIndexesByRef`),Z=new Map;class J{static id=0;id=++J.id;name;elements;wt;dt;xt;yt;info;constructor(t){const e=t.split("."),n=e.slice(),s=[];let o=0,r=0,i="",c=0,d="none";const a=[];for(let t=0;t<e.length;t++){const d=e[t];if("*"===d)n[t]="*",a.push(null),o++,c++;else{const e=Number(d);Number.isNaN(e)||(n[t]="*",a.push(e),r++,c++)}i+=d,s.push(i),i+=t<e.length-1?".":""}const l=A(n.join("."));(o>0||r>0)&&(d=o===c?"context":r===c?"all":"partial"),this.name=t,this.elements=e,this.wt=s,this.dt=c,this.xt=d,this.yt=a,this.info=l}}function K(t){let e;return Z.get(t)??(Z.set(t,e=new J(t)),e)}class Q{info;bt;get St(){return null===this.bt?null:this.bt.deref()??t({code:"LIST-201",message:"listIndex is null",context:{l:"StatePropertyRef.get listIndex",V:this.info.V,key:this.key},t:"./docs/error-codes.md#list"})}key;constructor(t,e){this.info=t,this.bt=null!==e?new WeakRef(e):null,this.key=null===e?t.V:`${t.V}#${e.V}`}get Ct(){const t=this.info.ct;if(!t)return null;return tt(t,(this.info.dt>t.dt?this.St?.at(-2):this.St)??null)}}const X=new WeakMap,Y={};function tt(t,e){let n=null;if(null!==e){let s;if(void 0===(s=X.get(e)))n=new Q(t,e),X.set(e,{[t.pattern]:n});else if(void 0===(n=s[t.pattern]))return s[t.pattern]=new Q(t,e)}else if(void 0===(n=Y[t.pattern]))return Y[t.pattern]=new Q(t,null);return n}function et(t,e){const n=t.vt;if(null===n)return null;if(null===n.St)return null;const s=n.info.X[e];return void 0!==s?n.St.at(s):null}function nt(e,n,s){switch(e.xt){case"none":return null;case"context":return et(s,e.info.ot??t({code:"STATE-202",message:"lastWildcardPath is null",context:{l:"StateClass.getListIndex",pattern:e.info.pattern},t:"./docs/error-codes.md#state"}))??t({code:"LIST-201",message:`ListIndex not found: ${e.info.pattern}`,context:{l:"StateClass.getListIndex",pattern:e.info.pattern},t:"./docs/error-codes.md#list"});case"all":{let s=null;for(let o=0;o<e.info.dt;o++){const r=e.info.nt[o]??t({code:"STATE-202",message:"wildcardParentPattern is null",context:{l:"StateClass.getListIndex",pattern:e.info.pattern,index:o},t:"./docs/error-codes.md#state"}),i=tt(r,s),c=n[G](i)??t({code:"LIST-201",message:`ListIndex not found: ${r.pattern}`,context:{l:"StateClass.getListIndex",It:r.pattern},t:"./docs/error-codes.md#list"}),d=e.yt[o]??t({code:"STATE-202",message:"wildcardIndex is null",context:{l:"StateClass.getListIndex",pattern:e.info.pattern,index:o},t:"./docs/error-codes.md#state"});s=c[d]??t({code:"LIST-201",message:`ListIndex not found: ${r.pattern}`,context:{l:"StateClass.getListIndex",It:r.pattern,Tt:d},t:"./docs/error-codes.md#list"})}return s}case"partial":t({code:"STATE-202",message:`Partial wildcard type is not supported yet: ${e.info.pattern}`,context:{l:"StateClass.getListIndex",pattern:e.info.pattern},t:"./docs/error-codes.md#state"})}}const st={};for(let t=0;t<32;t++)st[`$${t+1}`]=t;let ot=0,rt=0;class it{id=++rt;V=rt.toString();Nt;position;length;Bt;Ut;Pt;$t;constructor(t,e){this.Nt=t,this.position=t?t.position+1:0,this.length=this.position+1,this.Bt=e,this.Ut=ot}get index(){return this.Bt}set index(t){this.Bt=t,this.Ut=++ot,this.Lt[this.position]=t}get version(){return this.Ut}get Mt(){return null!==this.Nt&&(this.Nt.Mt||this.Nt.version>this.Ut)}get Lt(){return null===this.Nt?void 0===this.Pt&&(this.Pt=[this.Bt]):(void 0===this.Pt||this.Mt)&&(this.Pt=[...this.Nt.Lt,this.Bt],this.Ut=ot),this.Pt}get Et(){return null===this.Nt?void 0===this.$t&&(this.$t=[new WeakRef(this)]):void 0===this.$t&&(this.$t=[...this.Nt.Et,new WeakRef(this)]),this.$t}get _t(){return`$${this.position+1}`}at(t){return t>=0?this.Et[t]?.deref()||null:this.Et[this.Et.length+t]?.deref()||null}}function ct(t,e){return new it(t,e)}function dt(e,n,s,o){let r;!function(t,e){if(t.Rt>=0){const n=t.vt?.info??null;null!==n&&t.kt.Dt.At.has(n.pattern)&&n.pattern!==e.info.pattern&&t.kt.Dt.Ft(n.pattern,e.info.pattern)}}(o,n);const i=o.kt.Dt.Vt.has(n.info.pattern),c=n.info.dt>0||o.kt.Dt.Ot.has(n.info.pattern);let d=null;if(c||i){d=o.kt.Wt(n);const t=o.kt.Ht.get(n.info.pattern);if(null!==d){if(void 0===t)return d.value;if(d.version>o.jt.version)return d.value;if(!(d.version<t.version||d.qt<t.qt))return d.value}}if(o.kt.zt.startsWith(n.info)&&0===o.kt.Dt.Ot.intersection(n.info.j).size)return o.kt.zt.get(n);if(n.info.pattern in e){0===o.Gt.length&&t({code:"STC-002",message:"handler.refStack is empty in getByRef",context:{l:"StateClass.getByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#stc"}),o.Rt++,o.Rt>=o.Gt.length&&o.Gt.push(null),o.Gt[o.Rt]=o.vt=n;try{return r=Reflect.get(e,n.info.pattern,s)}finally{if(o.Gt[o.Rt]=null,o.Rt--,o.vt=o.Rt>=0?o.Gt[o.Rt]:null,c||i){let e=null;if(i){if(null!==o.Zt&&!o.Zt.Jt.has(n))if(d){const e=d.Et??[],s=d.value;Array.isArray(s)||t({code:"STC-001",message:`Property "${n.info.pattern}" is expected to be an array for list management.`,context:{l:"StateClass.getByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#stc"}),o.Zt.Jt.set(n,{Et:e,value:s})}else o.Zt.Jt.set(n,{Et:[],value:[]});e=function(t,e,n,s){const o=Array.isArray(e)?e:[],r=Array.isArray(n)?n:[],i=[];if(0===r.length)return[];if(0===o.length){for(let e=0;e<r.length;e++){const n=ct(t,e);i.push(n)}return i}if(function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(o,r))return s;const c=new Map;for(let t=0;t<o.length;t++)c.set(o[t],t);for(let e=0;e<r.length;e++){const n=r[e],o=c.get(n);if(void 0===o){const n=ct(t,e);i.push(n)}else{const t=s[o];t.index!==e&&(t.index=e),i.push(t)}}return i}(n.St,d?.value,r,d?.Et??[])}const s=d??{value:null,Et:null,version:0,qt:0};s.value=r,s.Et=e,s.version=o.jt.version,s.qt=o.jt.qt,o.kt.Kt(n,s)}}}else t({code:"STC-001",message:`Property "${n.info.pattern}" does not exist in state.`,context:{l:"StateClass.getByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#stc"})}function at(e,n,s,o,r){const i=r.kt.Dt.elements.has(n.info.pattern);let c=null,d=null;if(i&&(c=n.Ct??t({code:"STATE-202",message:"propRef.stateProp.parentInfo is undefined",context:{l:"StateClass.setByRef",scope:"element",Qt:n.info.pattern},t:"./docs/error-codes.md#state"}),d=r.jt.Xt.get(c)||null,null===d)){const e=o[W](c)??[];Array.isArray(e)||t({code:"STATE-202",message:"Expected array value for list elements",context:{l:"StateClass.setByRef",scope:"element",Qt:c.info.pattern},t:"./docs/error-codes.md#state"}),d={value:[...e],Et:[...o[G](c)??[]]},r.jt.Xt.set(c,d)}try{if(r.kt.zt.startsWith(n.info)&&0===r.kt.Dt.Yt.intersection(n.info.j).size)return r.kt.zt.set(n,s);if(!(n.info.pattern in e)){const i=n.info.ct??t({code:"STATE-202",message:"propRef.stateProp.parentInfo is undefined",context:{l:"StateClass.setByRef",Qt:n.info.pattern},t:"./docs/error-codes.md#state"}),c=tt(i,i.dt<n.info.dt?n.St?.Nt??null:n.St),d=dt(e,c,o,r);null!==d&&"object"==typeof d||t({code:"STATE-202",message:"Parent value is not an object",context:{l:"StateClass.setByRef",Qt:c.info.pattern},t:"./docs/error-codes.md#state"});const a=n.info.W;if("*"===a){const e=n.St?.index??t({code:"STATE-202",message:"propRef.listIndex?.index is undefined",context:{l:"StateClass.setByRef",Qt:n.info.pattern},t:"./docs/error-codes.md#state"});return Reflect.set(d,e,s)}return Reflect.set(d,a,s)}r.Rt++,r.Rt>=r.Gt.length&&r.Gt.push(null),r.Gt[r.Rt]=r.vt=n;try{return Reflect.set(e,n.info.pattern,s,o)}finally{r.Gt[r.Rt]=null,r.Rt--,r.vt=r.Rt>=0?r.Gt[r.Rt]:null}}finally{if(r.jt.te(n),i){const e=d.value.indexOf(s),i=o[G](c)??[],a=n.St.index,l=-1!==e?d.Et[e]:ct(c.St,-1);i[a]=l;const h=o[W](c)??[];null!==h&&Array.isArray(h)||t({code:"STATE-202",message:"Parent value is not an array during swap check",context:{l:"StateClass.setByRef",scope:"element swap",Qt:c.info.pattern},t:"./docs/error-codes.md#state"});if(new Set(h).size===d.value.length){for(let t=0;t<i.length;t++)i[t].index=t;r.jt.Xt.delete(c)}}}}function lt(e,n,s,o){return(n,r,i)=>{const c=A(n),d=o.vt?.info??null;null!==d&&d.pattern!==c.pattern&&o.kt.Dt.At.has(d.pattern)&&o.kt.Dt.Ft(d.pattern,c.pattern),c.nt.length>r.length&&t({code:"STATE-202",message:`indexes length is insufficient: ${n}`,context:{l:"StateClass.resolve",path:n,ee:c.nt.length,se:r.length},t:"./docs/error-codes.md#state"});let a=null;for(let n=0;n<c.nt.length;n++){const i=c.nt[n],d=tt(i,a);dt(e,d,s,o);const l=s[G](d);null===l&&t({code:"LIST-201",message:`ListIndexes not found: ${i.pattern}`,context:{l:"StateClass.resolve",pattern:i.pattern},t:"./docs/error-codes.md#list"});const h=r[n];a=l[h]??t({code:"LIST-201",message:`ListIndex not found: ${i.pattern}`,context:{l:"StateClass.resolve",pattern:i.pattern,index:h},t:"./docs/error-codes.md#list"})}const l=tt(c,a),h=void 0!==i;if(H in s){if(!h)return dt(e,l,s,o);at(e,l,i,s,o)}else{if(!h)return dt(e,l,s,o);t({code:"STATE-202",message:`Cannot set value on a readonly proxy: ${n}`,context:{l:"StateClass.resolve",path:n},t:"./docs/error-codes.md#state"})}}}function ht(e,n,s,o){const r=st[n];if(void 0!==r){const e=o.vt?.St;return e?.Lt[r]??t({code:"LIST-201",message:`ListIndex not found: ${n.toString()}`,context:{oe:String(n),Lt:e?.Lt??null,index:r},t:"/docs/error-codes.md#list",o:"error"})}if("string"==typeof n){if("$"===n[0])switch(n){case"$resolve":return lt(e,0,s,o);case"$getAll":return function(e,n,s,o){const r=lt(e,0,s,o);return(n,i)=>{let c=i;const d=A(n),a=o.vt?.info??null;if(null!==a&&a.pattern!==d.pattern&&o.kt.Dt.At.has(a.pattern)&&o.kt.Dt.Ft(a.pattern,d.pattern),void 0===c){for(let e=0;e<d.K.length;e++){const n=d.K[e]??t({code:"BIND-201",message:"Wildcard info is missing",context:{l:"StateClass.getAll",Tt:e,pattern:d.pattern},t:"./docs/error-codes.md#bind"}),s=et(o,n.pattern);if(s){c=s.Lt;break}}void 0===c&&(c=[])}const l=(n,r,i,c,d,a,h)=>{const u=n[r]??null;if(null===u)return void h.push(a);const f=tt(u,i);dt(e,f,s,o);const m=s[G](f);null===m&&t({code:"LIST-201",message:`ListIndex not found: ${u.pattern}`,context:{l:"StateClass.getAll",pattern:u.pattern},t:"./docs/error-codes.md#list"});const p=c[d]??null;if(null===p)for(let t=0;t<m.length;t++){const e=m[t];l(n,r+1,e,c,d+1,a.concat(e.index),h)}else{const e=m[p]??t({code:"LIST-201",message:`ListIndex not found: ${u.pattern}`,context:{l:"StateClass.getAll",pattern:u.pattern,index:p},t:"./docs/error-codes.md#list"});r+1<n.length?l(n,r+1,e,c,d+1,a.concat(e.index),h):h.push(a.concat(e.index))}},h=[];l(d.nt,0,null,c,0,[],h);const u=[];for(let t=0;t<h.length;t++)u.push(r(d.pattern,h[t]));return u}}(e,0,s,o);case"$trackDependency":return function(e,n,s,o){return e=>{const n=o.vt?.info??t({code:"STATE-202",message:"Internal error: lastRefStack is null",context:{l:"StateClass.trackDependency",path:e},t:"./docs/error-codes.md#state"});o.kt.Dt.Ot.has(n.pattern)&&n.pattern!==e&&o.kt.Dt.Ft(n.pattern,e)}}(0,0,0,o);case"$navigate":return t=>hn?.navigate(t);case"$component":return o.kt.re}const r=K(n),i=nt(r,s,o),c=tt(r.info,i);return dt(e,c,s,o)}if("symbol"==typeof n){if(!o.symbols.has(n))return Reflect.get(e,n,s);switch(n){case W:return t=>dt(e,t,s,o);case H:return(t,n)=>at(e,t,n,s,o);case G:return n=>function(e,n,s,o){if(o.kt.Dt.Vt.has(n.info.pattern)||t({code:"LIST-201",message:`path is not a list: ${n.info.pattern}`,context:{l:"StateClass.getListIndexesByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#list"}),o.kt.zt.startsWith(n.info)&&0===o.kt.Dt.Ot.intersection(n.info.j).size)return o.kt.zt.ie(n)??[];dt(e,n,s,o);const r=o.kt.Wt(n);null===r&&t({code:"LIST-202",message:`List cache entry not found: ${n.info.pattern}`,context:{l:"StateClass.getListIndexesByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#list"});const i=r.Et;return null===i&&t({code:"LIST-203",message:`List indexes not found in cache entry: ${n.info.pattern}`,context:{l:"StateClass.getListIndexesByRef",pattern:n.info.pattern},t:"./docs/error-codes.md#list"}),i}(e,n,s,o);case j:return()=>function(t,e,n){const s=Reflect.get(t,L);if("function"==typeof s)return s.call(n)}(e,0,s);case q:return()=>function(t,e,n){const s=Reflect.get(t,M);if("function"==typeof s)return s.call(n)}(e,0,s);case z:return t=>function(t,e,n){const s=Reflect.get(t,E);if("function"==typeof s){const t=new Set,o={};for(const n of e){const e=n.info.pattern;if(t.add(e),n.info.dt>0){const t=n.St.index,s=o[e];void 0===s?o[e]=[t]:s.push(t)}}return s.call(n,Array.from(t),o)}}(e,t,s)}}}let ut=class{kt;jt;Zt;Gt=Array(32).fill(null);Rt=-1;vt=null;ce=void 0;symbols=new Set([W,G]);de=new Set(["$resolve","$getAll","$trackDependency","$navigate","$component"]);constructor(t,e,n){this.kt=t,this.jt=e,this.Zt=n}get(t,e,n){return ht(t,e,n,this)}set(e,n,s,o){t({code:"STATE-202",message:`Cannot set property ${String(n)} of readonly state`,context:{l:"createReadonlyStateProxy.set",oe:String(n)},t:"./docs/error-codes.md#state"})}has(t,e){return Reflect.has(t,e)||this.symbols.has(e)||this.de.has(e)}};function ft(t,e,n){return new ut(t,e,n)}function mt(t,e){return new Proxy(t,e)}class pt{kt;jt;Zt=null;Gt=Array(32).fill(null);Rt=-1;vt=null;ce=void 0;symbols=new Set([W,H,G,j,q,z]);de=new Set(["$resolve","$getAll","$trackDependency","$navigate","$component"]);constructor(t,e){this.kt=t,this.jt=e}get(t,e,n){return ht(t,e,n,this)}set(t,e,n,s){return function(t,e,n,s,o){if("string"==typeof e){const r=K(e),i=nt(r,s,o);return at(t,tt(r.info,i),n,s,o),!0}return Reflect.set(t,e,n,s)}(t,e,n,s,this)}has(t,e){return Reflect.has(t,e)||this.symbols.has(e)||this.de.has(e)}}function gt(e,n,s,o,r){const i=new pt(e,n),c=new Proxy(s,i);return function(e,n,s){let o;if(void 0!==e.ce&&t({code:"STATE-301",message:"already in loop context",context:{l:"setLoopContext",ae:!0},t:"/docs/error-codes.md#state",hint:"Ensure handler.loopContext is cleared before invoking setLoopContext again.",o:"error"}),n){e.ce=n,e.Rt++,e.Rt>=e.Gt.length&&e.Gt.push(null),e.Gt[e.Rt]=e.vt=n.he;try{o=s()}catch(t){throw e.Gt[e.Rt]=null,e.Rt--,e.vt=e.Rt>=0?e.Gt[e.Rt]:null,e.ce=void 0,t}if(o instanceof Promise)return o.finally((()=>{e.Gt[e.Rt]=null,e.Rt--,e.vt=e.Rt>=0?e.Gt[e.Rt]:null,e.ce=void 0}));e.Gt[e.Rt]=null,e.Rt--,e.vt=e.Rt>=0?e.Gt[e.Rt]:null,e.ce=void 0}else{e.ce=n;try{o=s()}catch(t){throw e.ce=void 0,t}if(o instanceof Promise)return o.finally((()=>{e.ce=void 0}));e.ce=void 0}return o}(i,o,(()=>r(c,i)))}class wt{ue=new Set;fe=new Set;Jt=new Map;me;pe;we=[];xe=new Set;ye=null;be=null;constructor(t,e){this.me=t,this.pe=e}get Se(){return this.we}get Ce(){return this.xe}get _(){return this.ye||t({code:"UPD-002",message:"ReadonlyState not initialized",context:{l:"Updater.Renderer.readonlyState"},t:"./docs/error-codes.md#upd"}),this.ye}get R(){return this.be||t({code:"UPD-002",message:"ReadonlyHandler not initialized",context:{l:"Updater.Renderer.readonlyHandler"},t:"./docs/error-codes.md#upd"}),this.be}ve(t){const e=ft(this.me,this.pe,this),n=mt(this.me.state,e);this.ye=n,this.be=e;try{return t(n,e)}finally{this.ye=null,this.be=null}}Ie(e){this.fe.clear(),this.ue.clear(),this.we=[...e],this.xe=new Set(e),this.ve((()=>{const n=[],s=new Map,o=new Set;for(let r=0;r<e.length;r++){const i=e[r];if(o.add(i),!this.me.Dt.elements.has(i.info.pattern)){n.push(i);continue}const c=i.Ct??t({code:"UPD-004",message:`ParentInfo is null for ref: ${i.key}`,context:{l:"Updater.Renderer.render",Te:i.key,pattern:i.info.pattern},t:"./docs/error-codes.md#upd"});s.has(c)||s.set(c,new Set),s.get(c).add(i)}for(const[t,e]of s){if(o.has(t)){for(const t of e)this.fe.add(t);continue}const n=this.me.Ne(t);for(let t=0;t<n.length;t++)this.ue.has(n[t])||n[t].$(this);this.fe.add(t)}for(let e=0;e<n.length;e++){const s=n[e],o=F(this.me.Dt.Be,s.info.pattern);null===o&&t({code:"PATH-101",message:`PathNode not found: ${s.info.pattern}`,context:{l:"Updater.Renderer.render",pattern:s.info.pattern},t:"./docs/error-codes.md#path"}),this.fe.has(s)||this.Ue(s,o)}if(this.me.Pe.size>0)for(const t of this.me.Pe){const e=this.me.$e.get(t)??new Set;for(const t of e)t.P(n)}}))}Ue(e,n){this.fe.add(e);const s=this.me.Ne(e);for(let t=0;t<s.length;t++)this.ue.has(s[t])||s[t].$(this);let o=new Set;if(this.me.Dt.Vt.has(e.info.pattern)){const t=new Set(this._[G](e)??[]),{Et:n}=this.Jt.get(e)??{},s=new Set(n??[]);o=t.difference(s)}for(const[t,s]of n.ft){const n=A(s.ut);if("*"===t)for(const t of o){const e=tt(n,t);this.fe.has(e)||this.Ue(e,s)}else{const t=tt(n,e.St);this.fe.has(t)||this.Ue(t,s)}}const r=this.me.Dt.Le.get(e.info.pattern);if(r)for(const e of r){const n=A(e),s=F(this.me.Dt.Be,n.pattern);if(null===s&&t({code:"PATH-101",message:`PathNode not found: ${n.pattern}`,context:{l:"Updater.Renderer.renderItem",pattern:n.pattern},t:"./docs/error-codes.md#path"}),n.dt>0){const t=n.nt,e=(o,r,i)=>{const c=this._[G](o)||[];if(r+1<t.length)for(let n=0;n<c.length;n++){const s=tt(i,c[n]);e(s,r+1,t[r+1])}else for(let t=0;t<c.length;t++){const e=tt(n,c[t]);this.fe.has(e)||this.Ue(e,s)}},o=tt(n.nt[0],null);e(o,0,n.nt[1]||null)}else{const t=tt(n,null);this.fe.has(t)||this.Ue(t,s)}}}}class xt{Xt=new Map;Me=[];Ee=!1;me;Ut;_e=0;Re=[];Ae=new Map;constructor(t){this.me=t,this.Ut=t.De()}get version(){return this.Ut}get qt(){return this._e}te(t){this._e++,this.Me.push(t),this.Re.push(t),this.ke(this.me,t.info.pattern,this.me.Ht,this._e),this.Ee||(this.Ee=!0,queueMicrotask((()=>{this.Fe()})))}update(e,n){const s=gt(this.me,this,this.me.state,e,((t,e)=>n(t,e))),o=()=>{if(this.me.Dt.Ve&&this.Re.length>0){const e=this.Re;this.Re=[],queueMicrotask((()=>{const n=this.update(null,(t=>t[z](e)));n instanceof Promise&&n.catch((()=>{t({code:"UPD-005",message:"An error occurred during asynchronous state update.",context:{l:"Updater.update.updatedCallback"},t:"./docs/error-codes.md#upd"})}))}))}};return s instanceof Promise?s.finally((()=>{o()})):(o(),s)}Fe(){try{for(;this.Me.length>0;){const n=this.Me;this.Me=[],t=n,e=this.me,new wt(e,this).Ie(t)}}finally{this.Ee=!1}var t,e}Oe(t){var e;t((e=this.me,new wt(e,this)))}We(e,n,s,o,r){if(o.has(n))return;if(r&&e.Dt.elements.has(n))return;o.add(n);for(const[,t]of s.ft.entries()){const n=t.ut;this.We(e,n,t,o,!1)}const i=e.Dt.Le.get(n)??[];for(const n of i){const s=F(e.Dt.Be,n);null===s&&t({code:"UPD-004",message:`Path node not found for pattern: ${n}`,context:{l:"Updater.recursiveCollectMaybeUpdates",He:n},t:"./docs/error-codes.md#upd"}),this.We(e,n,s,o,!1)}}ke(e,n,s,o){const r=F(e.Dt.Be,n);null===r&&t({code:"UPD-003",message:`Path node not found for pattern: ${n}`,context:{l:"Updater.collectMaybeUpdates",path:n},t:"./docs/error-codes.md#upd"});let i=this.Ae.get(n);void 0===i&&(i=new Set,this.We(e,n,r,i,!0));const c={version:this.version,qt:o};for(const t of i)s.set(t,c);this.Ae.set(n,i)}ve(t){const e=ft(this.me,this,null);return t(mt(this.me.state,e),e)}}function yt(t,e){return e(new xt(t))}class bt extends I{get value(){return this.node.value}get F(){let t=this.value;for(let e=0;e<this.filters.length;e++)t=this.filters[e](t);return t}constructor(e,n,s,o,r,i){super(e,n,s,o,r,i);if(!(this.node instanceof HTMLInputElement))return;if("checkbox"!==this.node.type)return;i.length>1&&t({code:"BIND-201",message:"Checkbox binding has multiple decorators",context:{l:"BindingNodeCheckbox.constructor",name:this.name,je:i.length},t:"./docs/error-codes.md#bind",o:"error"});const c=(i[0]?.startsWith("on")?i[0]?.slice(2):i[0])??null??"input";if("readonly"===c||"ro"===c)return;const d=this.binding.kt;this.node.addEventListener(c,(t=>{const n=this.binding.ze.qe;yt(d,(t=>{t.update(n,((t,n)=>{e.Ge(t,n,this.F)}))}))}))}B(e){Array.isArray(e)||t({code:"BIND-201",message:"Checkbox value is not array",context:{l:"BindingNodeCheckbox.update",Ze:typeof e},t:"./docs/error-codes.md#bind",o:"error"});this.node.checked=e.includes(this.F)}}class St extends I{B(e){Array.isArray(e)||t({code:"BIND-201",message:"ClassList value is not array",context:{l:"BindingNodeClassList.update",Ze:typeof e},t:"./docs/error-codes.md#bind",o:"error"});this.node.className=e.join(" ")}}class Ct extends I{B(e){"boolean"!=typeof e&&t({code:"BIND-201",message:"ClassName value is not boolean",context:{l:"BindingNodeClassName.update",Ze:typeof e},t:"./docs/error-codes.md#bind",o:"error"});this.node.classList.toggle(this.I,e)}}const vt={};class It extends I{constructor(t,e,n,s,o,r){super(t,e,n,s,o,r);e.addEventListener(this.I,(t=>this.Je(t)))}update(){}Je(e){const n=this.binding.kt,s=this.binding.ze.qe,o=s?.Ke().map((t=>t.St.index))??[],r=this.T;r.includes("preventDefault")&&e.preventDefault(),r.includes("stopPropagation")&&e.stopPropagation();const i=yt(n,(n=>n.update(s,((n,s)=>{const r=this.binding.M.Qe(n,s);if("function"==typeof r)return Reflect.apply(r,n,[e,...o]);t({code:"BIND-201",message:"Binding value is not a function",context:{l:"BindingNodeEvent.handler",Xe:this.name,Ye:this.I,Ze:typeof r},t:"./docs/error-codes.md#bind",o:"error"})}))));i instanceof Promise&&i.catch((e=>{const n=e instanceof Error?e:new Error(String(e));t({code:"BIND-202",message:"Event handler rejected",context:{l:"BindingNodeEvent.handler",Xe:this.name,Ye:this.I},t:"./docs/error-codes.md#bind",o:"error",i:n})}))}$(t){}}const Tt={},Nt=(t,e,n)=>(s,o,r)=>{const i=v(r,e),c=Tt[t]??(Tt[t]=t.slice(2));return new It(s,o,t,c,i,n)};class Bt extends I{tn;get id(){return this.tn}constructor(e,n,s,o,r,i){super(e,n,s,o,r,i);const c=this.node.textContent?.slice(3)??t({code:"BIND-201",message:"Invalid node",context:{l:"BindingNodeBlock.id",textContent:this.node.textContent??null},t:"./docs/error-codes.md#bind",o:"error"}),[d]=c.split(" ",2),a=Number(d);(a.toString()!==d||isNaN(a)||!isFinite(a)||!Number.isInteger(a)||a<0)&&t({code:"BIND-201",message:"Invalid node",context:{l:"BindingNodeBlock.id",textContent:this.node.textContent},t:"./docs/error-codes.md#bind",o:"error"}),this.tn=a}}class Ut extends Bt{en;nn;sn=[];rn;constructor(t,e,n,s,o,r){super(t,e,n,s,o,r);const i=tt(A(""),null);this.en=_e(this.binding,this.id,this.binding.kt,i),this.nn=[this.en],this.rn=this.sn}get N(){return this.rn}B(e){t({code:"BIND-301",message:"Binding assignValue not implemented",context:{l:"BindingNodeIf.assignValue",Xe:this.name},t:"./docs/error-codes.md#bind"})}$(e){const n={l:"BindingNodeIf.applyChange",Xe:this.name},s=this.binding.M.L(e._,e.R);"boolean"!=typeof s&&t({code:"BIND-201",message:"If binding value is not boolean",context:{...n,Ze:typeof s},t:"./docs/error-codes.md#bind"});const o=this.node.parentNode;null===o&&t({code:"BIND-201",message:"Parent node not found",context:{...n,nodeType:this.node.nodeType},t:"./docs/error-codes.md#bind"}),s?(this.en.A(),this.en.cn(o,this.node),this.en.$(e),this.rn=this.nn):(this.en.unmount(),this.en.D(),this.rn=this.sn)}D(){this.en.unmount(),this.en.D(),this.rn=this.sn}}const Pt=!0===globalThis.__STRUCTIVE_USE_ALL_APPEND__;class $t extends Bt{rn=[];dn=new WeakMap;an=[];ln=0;hn=void 0;un=void 0;fn=[];mn=new Set;get N(){return this.rn}get pn(){return this.ln}set pn(t){this.ln=t}get gn(){return this.an.length}set gn(e){e<0&&t({code:"BIND-202",message:"BindContent pool length is negative",context:{l:"BindingNodeFor.setPoolLength",Xe:this.name,wn:e},t:"./docs/error-codes.md#bind"}),this.an.length=e}get xn(){if(void 0===this.hn){const t=`${this.binding.M.pattern}.*`;this.hn=A(t)}return this.hn}yn(t,e){let n;if(this.ln>=0)n=this.an[this.ln],this.ln--,n.bn(e);else{const t=tt(this.xn,e);n=_e(this.binding,this.id,this.binding.kt,t)}return this.dn.set(e,n),n.A(),n}Sn(t){t.unmount(),t.D()}B(e){t({code:"BIND-301",message:"Binding assignValue not implemented",context:{l:"BindingNodeFor.assignValue"},hint:"Call applyChange to update loop bindings",t:"./docs/error-codes.md#bind"})}$(e){let n=[];const s={l:"BindingNodeFor.applyChange",Xe:this.name,Cn:this.binding.M.pattern},o=e._[W](this.binding.M.he);Array.isArray(o)||t({code:"BIND-201",message:"Loop value is not array",context:{...s,Ze:null===o?"null":typeof o},t:"./docs/error-codes.md#bind"});const r=e._[G](this.binding.M.he)??[],i=new Set(r),c=void 0===this.un?[]:this.un;Array.isArray(c)||t({code:"BIND-201",message:"Previous loop value is not array",context:{...s,Ze:null===c?"null":typeof c},t:"./docs/error-codes.md#bind"});const d=c.length??0,a=0===i.size?this.mn:this.mn.difference(i),l=0===this.mn.size?i:i.difference(this.mn),h=o?.length??0,u=new Set,f=new Set,m=`${this.binding.M.info.pattern}.*`;for(let n=0;n<e.Se.length;n++){const o=e.Se[n];if(o.info.pattern!==m)continue;if(e.fe.has(o))continue;const r=o.St;null===r&&t({code:"BIND-201",message:"ListIndex is null",context:{...s,vn:o.info.pattern},t:"./docs/error-codes.md#bind"}),this.mn.has(r)?u.add(r):f.add(r),e.fe.add(o)}const p=this.node.parentNode??t({code:"BIND-201",message:"Parent node not found",context:{...s,nodeType:this.node.nodeType},t:"./docs/error-codes.md#bind"}),g=new Set,w=d===a.size&&d>0;let x=!1;if(w){const e=Array.from(p.childNodes),n=this.rn.at(-1)??t({code:"BIND-201",message:"Last BindContent not found",context:{...s,In:this.rn.length},t:"./docs/error-codes.md#bind"});let o=e[0];for(;o&&o.nodeType===Node.TEXT_NODE&&""===o.textContent?.trim();)o=o.nextSibling;let r=e.at(-1)??null;for(;r&&r.nodeType===Node.TEXT_NODE&&""===r.textContent?.trim();)r=r.previousSibling;o===this.node&&r===n.Tn(p)&&(x=!0)}if(w&&x){p.textContent="",p.append(this.node);for(let t=0;t<this.rn.length;t++)this.rn[t].D();this.an.push(...this.rn)}else if(a.size>0){for(const e of a){const n=this.dn.get(e);void 0===n&&t({code:"BIND-201",message:"BindContent not found",context:{...s,Nn:"removes",St:e.index},t:"./docs/error-codes.md#bind"}),this.Sn(n),g.add(n)}this.an.push(...g)}let y=null;const b=this.node;this.pn=this.gn-1;const S=Pt&&h===l.size&&h>0;if(0===l.size&&0===a.size&&(u.size>0||f.size>0)){if(u.size>0){const e=Array.from(this.rn),o=Array.from(u);o.sort(((t,e)=>t.index-e.index));for(const n of o){const o=this.dn.get(n);void 0===o&&t({code:"BIND-201",message:"BindContent not found",context:{...s,Nn:"reorder",St:n.index},t:"./docs/error-codes.md#bind"}),e[n.index]=o;const r=e[n.index-1]?.Tn(p)??b;o.cn(p,r)}n=e}if(f.size>0)for(const n of f){const o=this.dn.get(n);void 0===o&&t({code:"BIND-201",message:"BindContent not found",context:{...s,Nn:"overwrites",St:n.index},t:"./docs/error-codes.md#bind"}),o.$(e)}}else{const o=new Map;for(let t=0;t<this.fn.length;t++)o.set(this.fn[t],t);const i=S?document.createDocumentFragment():p,c=S?null:b,d=[];for(let a=0;a<r.length;a++){const h=r[a],u=y?.Tn(i)??c;let f;if(l.has(h))f=this.yn(e,h),f.cn(i,u),f.$(e);else{f=this.dn.get(h),void 0===f&&t({code:"BIND-201",message:"BindContent not found",context:{...s,Nn:"reuse",St:h.index},t:"./docs/error-codes.md#bind"}),u?.nextSibling!==f.Bn&&f.cn(i,u);const e=o.get(h);void 0!==e&&e!==a&&d.push(h)}n.push(f),y=f}if(S){const t=b.nextSibling;p.insertBefore(i,t)}for(const t of d){const n=this.binding.Un.get(t)??[];for(const t of n)e.ue.has(t)||t.$(e)}}this.gn=this.pn+1,this.rn=n,this.un=[...o],this.fn=[...r],this.mn=i}D(){for(let t=0;t<this.rn.length;t++){const e=this.rn[t];e.unmount(),e.D()}this.an.push(...this.rn),this.rn=[],this.dn=new WeakMap,this.ln=0,this.un=void 0,this.fn=[],this.mn=new Set}}const Lt=(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new $t(s,o,t,"",i,n)};const Mt={value:"input",valueAsNumber:"input",valueAsDate:"input",checked:"change",selected:"change"},Et={radio:new Set(["checked"]),checkbox:new Set(["checked"])},_t=new Set(["value","valueAsNumber","valueAsDate"]),Rt=new Set;class At extends I{constructor(e,n,s,o,r,i){super(e,n,s,o,r,i);if(!(this.node instanceof HTMLElement))return;if(!((c=this.node)instanceof HTMLInputElement||c instanceof HTMLTextAreaElement||c instanceof HTMLSelectElement))return;var c;const d=(t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLOptionElement?_t:t instanceof HTMLInputElement?Et[t.type]??_t:Rt)(this.node);if(!d.has(this.name))return;i.length>1&&t({code:"BIND-201",message:"Property binding has multiple decorators",context:{l:"BindingNodeProperty.constructor",Xe:this.name,je:i.length},t:"./docs/error-codes.md#bind"});const a=(i[0]?.startsWith("on")?i[0]?.slice(2):i[0])??null??Mt[this.name]??"readonly";if("readonly"===a||"ro"===a)return;const l=this.binding.kt;this.node.addEventListener(a,(t=>{const n=this.binding.ze.qe;yt(l,(t=>{t.update(n,((t,n)=>{e.Ge(t,n,this.F)}))}))}))}get value(){return this.node[this.name]}get F(){let t=this.value;for(let e=0;e<this.filters.length;e++)t=this.filters[e](t);return t}B(e){let n;n=null==e||Number.isNaN(e)?"":e,this.name in this.node?this.node[this.name]=n:t({code:"BIND-201",message:`Property not found on node: ${this.name}`,context:{l:"BindingNodeProperty.assignValue",Xe:this.name,nodeType:this.node.nodeType},t:"./docs/error-codes.md#bind"})}}const Dt=(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new At(s,o,t,"",i,n)};class kt extends I{constructor(e,n,s,o,r,i){super(e,n,s,o,r,i);if(!(this.node instanceof HTMLInputElement))return;if("radio"!==this.node.type)return;i.length>1&&t({code:"BIND-201",message:"Radio binding has multiple decorators",context:{l:"BindingNodeRadio.constructor",Xe:this.name,je:i.length},t:"./docs/error-codes.md#bind"});const c=(i[0]?.startsWith("on")?i[0]?.slice(2):i[0])??null??"input";if("readonly"===c||"ro"===c)return;const d=this.binding.kt;this.node.addEventListener(c,(t=>{const n=this.binding.ze.qe;yt(d,(t=>{t.update(n,((t,n)=>{e.Ge(t,n,this.F)}))}))}))}get value(){return this.node.value}get F(){let t=this.value;for(let e=0;e<this.filters.length;e++)t=this.filters[e](t);return t}B(t){let e;e=null==t?"":t;this.node.checked=e===this.F}}class Ft extends I{B(t){const e=this.node,n=null==t||"number"==typeof t&&Number.isNaN(t)?"":String(t);e.style.setProperty(this.I,n.toString())}}const Vt={},Ot="component-state-input",Wt=Symbol.for(`${Ot}.AssignState`),Ht=Symbol.for(`${Ot}.NotifyRedraw`),jt=new WeakMap;function qt(e){if(e.tagName.includes("-"))return e.tagName.toLowerCase();const n=e.getAttribute("is");if(n?.includes("-"))return n.toLowerCase();t({code:"COMP-401",message:"Custom element tag name not found",context:{l:"WebComponents.getCustomTagName",tagName:e.tagName,Pn:n??null},t:"./docs/error-codes.md#comp"})}class zt extends I{tagName;constructor(e,n,s,o,r,i){super(e,n,s,o,r,i);const c=this.node;c.tagName.includes("-")?this.tagName=c.tagName.toLowerCase():c.getAttribute("is")?.includes("-")?this.tagName=c.getAttribute("is").toLowerCase():t({code:"COMP-401",message:"Custom element tag name not found",context:{l:"BindingNodeComponent.constructor"},t:"./docs/error-codes.md#comp"})}$n(e){const n=this.node,s=qt(n);customElements.whenDefined(s).then((()=>{n.state[Ht](e)})).catch((e=>{const n=e instanceof Error?e:new Error(String(e));t({code:"COMP-402",message:`Custom element definition failed: ${s}`,context:{l:"BindingNodeComponent._notifyRedraw",tagName:s},t:"./docs/error-codes.md#comp",i:n})}))}P(t){const e=[],n=this.binding.M.he,s=n.St,o=(s?.length??0)-1;for(const r of t)r.info.pattern!==n.info.pattern&&r.info.j.has(n.info.pattern)&&(o>=0&&r.St?.at(o)!==s||e.push(r));0!==e.length&&this.$n(e)}$(t){this.$n([this.binding.M.he])}A(){const e=this.binding.kt,n=e.re,s=this.node,o=qt(s);customElements.whenDefined(o).then((()=>{n.Ln(s),s.En.Mn(this.binding)})).catch((e=>{const n=e instanceof Error?e:new Error(String(e));t({code:"COMP-402",message:`Custom element definition failed: ${o}`,context:{l:"BindingNodeComponent.activate",tagName:o},t:"./docs/error-codes.md#comp",i:n})})),function(t,e){jt.set(e,t)}(n,s);let r=e.$e.get(s);void 0===r&&e.$e.set(s,r=new Set),r.add(this.binding)}D(){const t=this.binding.kt;var e;e=this.node,jt.delete(e);const n=t.$e.get(this.node);void 0!==n&&n.delete(this.binding)}}const Gt={},Zt={0:{class:(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new St(s,o,t,"",i,n)},checkbox:(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new bt(s,o,t,"",i,n)},radio:(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new kt(s,o,t,"",i,n)}},1:{if:(t,e,n)=>(s,o,r)=>{const i=v(r,e);return new Ut(s,o,t,"",i,n)}}},Jt={class:(t,e,n)=>(s,o,r)=>{const i=v(r,e),c=vt[t]??(vt[t]=t.split(".")[1]);return new Ct(s,o,t,c,i,n)},attr:(t,e,n)=>(s,o,r)=>{const i=v(r,e),c=N[t]??(N[t]=t.split(".")[1]);return new T(s,o,t,c,i,n)},style:(t,e,n)=>(s,o,r)=>{const i=v(r,e),c=Vt[t]??(Vt[t]=t.split(".")[1]);return new Ft(s,o,t,c,i,n)},state:(t,e,n)=>(s,o,r)=>{const i=v(r,e),c=Gt[t]??(Gt[t]=t.split(".")[1]);return new zt(s,o,t,c,i,n)}};const Kt={};function Qt(e,n,s,o){const r=e instanceof Comment,i=e instanceof Element,c=`${r}\t${i}\t${n}`,d=Kt[c]??(Kt[c]=function(e,n,s){const o=Zt[e?1:0][s];if(void 0!==o)return o;if(e&&"for"===s)return Lt;e&&t({code:"BIND-106",message:`Comment binding property not supported: ${s}`,context:{l:"BindingBuilder.getBindingNodeCreator",propertyName:s,nodeType:"Comment"},t:"./docs/error-codes.md#bind"});const r=s.split("."),i=Jt[r[0]];return void 0!==i?i:n&&s.startsWith("on")?Nt:Dt}(r,i,n));return d(n,s,o)}class Xt{pattern;info;_n;constructor(t){this.pattern=t,this.info=A(t),this._n=0===this.info.dt?tt(this.info,null):null}}const Yt={};class te{filters;Rn=!1;An;u;Dn=null;kn=null;constructor(t,e,n){this.An=Yt[e]??(Yt[e]=new Xt(e)),this.u=t,this.filters=n}get pattern(){return this.An.pattern}get info(){return this.An.info}get St(){return this.he.St}get he(){return null===this.An._n?(null===this.kn&&t({code:"BIND-201",message:"LoopContext is null",context:{l:"BindingState.ref",pattern:this.pattern,dt:this.info.dt},t:"./docs/error-codes.md#bind"}),null===this.Dn&&(this.Dn=tt(this.info,this.kn.St)),this.Dn):this.An._n}Qe(t,e){return dt(this.u.kt.state,this.he,t,e)}L(t,e){let n=dt(this.u.kt.state,this.he,t,e);for(let t=0;t<this.filters.length;t++)n=this.filters[t](n);return n}B(t,e,n){at(this.u.kt.state,this.he,n,t,e)}A(){if(this.info.dt>0){const e={l:"BindingState.activate",pattern:this.pattern},n=this.info.ot??t({code:"BIND-201",message:"Wildcard last parentPath is null",context:e,t:"./docs/error-codes.md#bind"});this.kn=this.u.ze.qe?.find(n)??t({code:"BIND-201",message:"LoopContext is null",context:{...e,ot:n},t:"./docs/error-codes.md#bind"})}this.u.kt.Fn(this.he,this.u)}D(){this.u.kt.Vn(this.he,this.u),this.Dn=null,this.kn=null}}class ee{pattern;On;constructor(e){this.pattern=e;const n=Number(e.slice(1));isNaN(n)&&t({code:"BIND-202",message:"Pattern is not a number",context:{l:"BindingStateIndex.constructor",pattern:e},t:"./docs/error-codes.md#bind"}),this.On=n}}const ne={};class se{filters;An;u;kn=null;constructor(t,e,n){this.u=t,this.An=ne[e]??(ne[e]=new ee(e)),this.filters=n}Wn(t,e={}){return{l:t,pattern:this.An.pattern,On:this.An.On,...e}}get pattern(){return t({code:"BIND-301",message:"Binding pattern not implemented",context:this.Wn("BindingStateIndex.pattern"),t:"./docs/error-codes.md#bind"})}get info(){return t({code:"BIND-301",message:"Binding info not implemented",context:this.Wn("BindingStateIndex.info"),t:"./docs/error-codes.md#bind"})}get St(){return this.kn?.St??t({code:"LIST-201",message:"listIndex is null",context:this.Wn("BindingStateIndex.listIndex"),t:"./docs/error-codes.md#list"})}get he(){return this.kn?.he??t({code:"STATE-202",message:"ref is null",context:this.Wn("BindingStateIndex.ref"),t:"./docs/error-codes.md#state"})}get Rn(){return!0}Qe(e,n){return this.St?.index??t({code:"LIST-201",message:"listIndex is null",context:this.Wn("BindingStateIndex.getValue"),t:"./docs/error-codes.md#list"})}L(e,n){let s=this.St?.index??t({code:"LIST-201",message:"listIndex is null",context:this.Wn("BindingStateIndex.getFilteredValue"),t:"./docs/error-codes.md#list"});for(let t=0;t<this.filters.length;t++)s=this.filters[t](s);return s}B(e,n,s){t({code:"BIND-301",message:"Binding assignValue not implemented",context:this.Wn("BindingStateIndex.assignValue"),t:"./docs/error-codes.md#bind"})}A(){const e=this.Wn("BindingStateIndex.activate"),n=(this.u.ze.qe??t({code:"BIND-201",message:"LoopContext is null",context:e,t:"./docs/error-codes.md#bind"})).Ke();this.kn=n[this.An.On-1]??t({code:"BIND-201",message:"Current loopContext is null",context:this.Wn("BindingStateIndex.activate",{Hn:this.An.On-1,jn:n.length}),t:"./docs/error-codes.md#bind"});const s=this.kn.zn?.qn??null;null===s&&t({code:"BIND-201",message:"Binding for list is null",context:e,t:"./docs/error-codes.md#bind"});const o=s.Un.get(this.St);void 0===o?s.Un.set(this.St,new Set([this.u])):o.add(this.u)}D(){this.kn=null}}const oe=new RegExp(/^\$\d+$/);function re(t,e){return oe.test(t)?((t,e)=>(n,s)=>{const o=v(s,e);return new se(n,t,o)})(t,e):((t,e)=>(n,s)=>{const o=v(s,e);return new te(n,t,o)})(t,e)}const ie={};function ce(e,n=(t=>`${t.constructor.name}\t${t instanceof Comment?t.textContent?.[2]??"":""}`)(e)){return ie[n]??(ie[n]=(e=>e instanceof Comment&&":"===e.textContent?.[2]?"Text":e instanceof HTMLElement?"HTMLElement":e instanceof Comment&&"|"===e.textContent?.[2]?"Template":e instanceof SVGElement?"SVGElement":t({code:"BIND-105",message:`Node type not supported: ${e.nodeType}`,context:{l:"BindingBuilder.getNodeType",nodeType:e.nodeType,nodeName:e.nodeName,Gn:e.constructor.name},t:"./docs/error-codes.md#bind"}))(e))}const de=t=>t.trim(),ae=t=>t.length>0,le=new RegExp(/^#(.*)#$/),he=t=>{const e=le.exec(t);return e?decodeURIComponent(e[1]):t},ue=t=>{const[e,...n]=t.split(",").map(de);return{name:e,options:n.map(he)}},fe=t=>{const[e,...n]=t.split("|").map(de);return{Zn:e,filters:n.map(ue)}},me=t=>t.split(";").map(de).filter(ae).map((t=>(t=>{const[e,n=null]=t.split("@").map(de),s=n?n.split(",").map(de):[],[o,r]=e.split(":").map(de),{Zn:i,filters:c}=fe(o),{Zn:d,filters:a}=fe(r);return{Jn:i,Kn:d,Qn:c,Xn:a,T:s}})(t))),pe={};const ge=t=>{t.removeAttribute("data-bind")},we={HTMLElement:ge,SVGElement:ge,Text:void 0,Yn:void 0};const xe={Text:t=>{const e=document.createTextNode("");return t.parentNode?.replaceChild(e,t),e},HTMLElement:void 0,Yn:void 0,SVGElement:void 0};class ye{nodeType;ts;es;ns=new Map;constructor(t){this.nodeType=ce(t);const e=function(t,e){switch(t){case"Text":return`textContent:${e.textContent?.slice(3).trim()??""}`;case"HTMLElement":case"SVGElement":return e.getAttribute(B)??"";case"Template":{const t=e.textContent?.slice(3).trim(),[n]=t?.split(" ",2)??[];return Be(Number(n)).getAttribute(B)??""}default:return""}}(this.nodeType,t),n=function(t,e){return xe[e]?.(t)??t}(t,this.nodeType);!function(t,e){we[e]?.(t)}(n,this.nodeType),this.ts=function(t){let e=[],n=t;for(;null!==n.parentNode;)e=[Array.from(n.parentNode.childNodes).indexOf(n),...e],n=n.parentNode;return e}(n),this.es=function(t){return""===t.trim()?[]:pe[t]??(pe[t]=me(t))}(e);for(let t=0;t<this.es.length;t++){const e=this.es[t],s={ss:Qt(n,e.Jn,e.Qn,e.T),rs:re(e.Kn,e.Xn)};this.ns.set(e,s)}}}function be(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,{acceptNode:t=>t instanceof Element?t.hasAttribute(B)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:function(t){return t instanceof Comment&&(0===t.textContent?.indexOf(U)||0===t.textContent?.indexOf(P))}(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}const Se={},Ce={},ve={};function Ie(t){return be(t).map((t=>function(t){return new ye(t)}(t)))}const Te={};function Ne(t,e,n){var s;return s=e.content,Array.from(s.childNodes).forEach((t=>{t.nodeType!==Node.TEXT_NODE||(t.nodeValue??"").trim()||s.removeChild(t)})),function(t,e,n=t){const s=Ie(e),o=ve[n]??(ve[n]=new Set),r=Ce[n]??(Ce[n]=new Set);for(let t=0;t<s.length;t++){const e=s[t];for(let t=0;t<e.es.length;t++){const n=e.es[t];o.add(n.Kn),"for"===n.Jn&&r.add(n.Kn)}}Se[t]=s}(t,e.content,n),Te[t]=e,t}function Be(e){return Te[e]??t({code:"TMP-001",message:`Template not found: ${e}`,context:{l:"Template.getTemplateById",cs:e},t:"./docs/error-codes.md#tmp"})}class Ue{ze;kt;node;ds;M;Un=new WeakMap;ls=!1;constructor(t,e,n,s,o){this.ze=t,this.node=e,this.kt=n,this.ds=s(this,e,n.hs),this.M=o(this,n.us)}get N(){return this.ds.N}get isActive(){return this.ls}Ge(t,e,n){this.M.B(t,e,n)}P(t){this.ds.P(t)}$(t){if(t.ue.has(this))return;t.ue.add(this),this.ds.$(t);const e=this.M.he;if(!this.M.Rn&&!this.kt.Dt.Le.has(e.info.pattern)){1===this.kt.Ne(e).length&&t.fe.add(e)}}A(){this.ls=!0,this.M.A(),this.ds.A()}D(){this.isActive&&(this.ds.D(),this.M.D(),this.ls=!1)}}function Pe(t,e,n,s,o){return new Ue(t,e,n,s,o)}class $e{info;zn;Dn;fs;ps={};constructor(t,e){this.Dn=t,this.info=t.info,this.zn=e}get he(){return this.Dn??t({code:"STATE-202",message:"ref is null",context:{l:"LoopContext.ref",path:this.info.pattern},t:"./docs/error-codes.md#state"})}get path(){return this.he.info.pattern}get St(){return this.he.St??t({code:"LIST-201",message:"listIndex is required",context:{l:"LoopContext.listIndex",path:this.info.pattern},t:"./docs/error-codes.md#list"})}bn(t){this.Dn=tt(this.info,t)}gs(){this.Dn=null}get ws(){if(void 0===this.fs){let t=this.zn;for(;null!==t;){if(null!==t.ce&&t.ce!==this){this.fs=t.ce;break}t=t.qn?.ze??null}void 0===this.fs&&(this.fs=null)}return this.fs}find(t){let e=this.ps[t];if(void 0===e)if(this.path===t)e=this.ps[t]=this;else{let n=this.ws;for(;null!==n&&n.path!==t;)n=n.ws;e=this.ps[t]=n}return e}xs(t){t(this);let e=this.ws;for(;null!==e;)t(e),e=e.ws}Ke(){const t=[];return this.xs((e=>{t.unshift(e)})),t}}function Le(e){const n=Be(e)??t({code:"TMP-001",message:`Template not found: ${e}`,context:{l:"BindContent.createContent",cs:e},t:"./docs/error-codes.md#tmp"}),s=document.importNode(n.content,!0);if(Object.keys(rn).length>0){const t=s.querySelectorAll(":not(:defined)");for(let e=0;e<t.length;e++){dn(t[e].tagName.toLowerCase())}}return s}function Me(e,n,s,o){const r=(t=>Se[t])(n)??t({code:"BIND-101",message:"Data-bind not registered",context:{l:"BindContent.createBindings",cs:n},t:"./docs/error-codes.md#bind"}),i=[];for(let c=0;c<r.length;c++){const d=r[c],a=y(o,d.ts)??t({code:"BIND-102",message:`Node not found by nodePath: ${String(d.ts)}`,context:{l:"BindContent.createBindings",cs:n,ts:d.ts},t:"./docs/error-codes.md#bind"});for(let o=0;o<d.es.length;o++){const r=d.es[o],c=d.ns.get(r)??t({code:"BIND-103",message:`Creator not found for bindText: ${String(r)}`,context:{l:"BindContent.createBindings",cs:n,ys:r},t:"./docs/error-codes.md#bind"}),l=Pe(e,a,s,c.ss,c.rs);i.push(l)}}return i}class Ee{qn;ce;id;Bn;bs;fragment;childNodes;Ss=[];me;ls=!1;Cs;Tn(e){const n=this.Ss[this.Ss.length-1],s=this.bs;if(void 0!==n&&n.node===s&&n.N.length>0){const s=(n.N.at(-1)??t({code:"BIND-104",message:"Child bindContent not found",context:{l:"BindContent.getLastNode",cs:this.id},t:"./docs/error-codes.md#bind"})).Tn(e);if(null!==s)return s}return e!==s?.parentNode?null:s}get qe(){if(void 0===this.Cs){if(null!==this.ce)return this.Cs=this.ce,this.Cs;let t=this.qn?.ze??null;for(;null!==t&&null===t.ce;)t=t.qn?.ze??null;this.Cs=t?.ce??null}return this.Cs}constructor(t,e,n,s){this.qn=t,this.id=e,this.fragment=Le(e),this.childNodes=Array.from(this.fragment.childNodes),this.Bn=this.childNodes[0]??null,this.bs=this.childNodes[this.childNodes.length-1]??null,this.me=n,this.ce=null!==s.St?new $e(s,this):null;const o=Me(this,e,n,this.fragment);this.Ss=o}get isActive(){return this.ls}mount(t){for(let e=0;e<this.childNodes.length;e++)t.appendChild(this.childNodes[e])}vs(t,e){for(let n=0;n<this.childNodes.length;n++)t.insertBefore(this.childNodes[n],e)}cn(t,e){const n=e?.nextSibling??null;for(let e=0;e<this.childNodes.length;e++)t.insertBefore(this.childNodes[e],n)}unmount(){this.Cs=void 0;const t=this.childNodes[0]?.parentNode??null;if(null!==t)for(let e=0;e<this.childNodes.length;e++)t.removeChild(this.childNodes[e])}bn(e){null===this.ce&&t({code:"BIND-201",message:"LoopContext is null",context:{l:"BindContent.assignListIndex",cs:this.id},t:"./docs/error-codes.md#bind"}),this.ce.bn(e)}$(t){if(null!==(this.childNodes[0]?.parentNode??null))for(let e=0;e<this.Ss.length;e++){const n=this.Ss[e];t.ue.has(n)||n.$(t)}}A(){this.ls=!0;for(let t=0;t<this.Ss.length;t++)this.Ss[t].A()}D(){this.ls=!1,this.ce?.gs();for(let t=0;t<this.Ss.length;t++)this.Ss[t].D()}}function _e(t,e,n,s){return new Ee(t,e,n,s)}function Re(t,e){const n=function(t){let e=t;for(;e;){if(e instanceof ShadowRoot)return e;e=e.parentNode}}(t.parentNode)||document,s=n.adoptedStyleSheets;s.includes(e)||(n.adoptedStyleSheets=[...s,e])}function Ae(t,e){if(!t.shadowRoot){t.attachShadow({mode:"open"}).adoptedStyleSheets=[e]}}function De(t,e,n){"none"===e.shadowDomMode?Re(t,n):"force"===e.shadowDomMode||null===e.Is||function(t){try{const e=document.createElement(t);return"function"==typeof e.attachShadow&&(e.attachShadow({mode:"open"}),!0)}catch{return!1}}(e.Is)?Ae(t,n):Re(t,n)}class ke{Ts=new Set;Ns=new Set;Bs=new Map;Us=new Map;Ps=new Map;$s=new Map;Ls=new WeakSet;Mn(e){if(this.Ls.has(e))return;const n=e.M.pattern,s=e.ds.I;this.Ps.has(n)&&t({code:"STATE-303",message:`Parent path "${n}" already has a child path`,context:{l:"ComponentStateBinding.addBinding",it:n,Ms:this.Ps.get(n)},t:"./docs/error-codes.md#state"}),this.$s.has(s)&&t({code:"STATE-303",message:`Child path "${s}" already has a parent path`,context:{l:"ComponentStateBinding.addBinding",Es:s,_s:this.$s.get(s)},t:"./docs/error-codes.md#state"}),this.Ps.set(n,s),this.$s.set(s,n),this.Ns.add(n),this.Ts.add(s),this.Bs.set(n,e),this.Us.set(s,e),this.Ls.add(e)}Rs(t){return this.Ps.get(t)}As(t){return this.$s.get(t)}Ds(e){const n=A(e).j.intersection(this.Ts);0===n.size&&t({code:"STATE-302",message:`No parent path found for child path "${e}"`,context:{l:"ComponentStateBinding.toParentPathFromChildPath",Es:e},t:"./docs/error-codes.md#state"});const s=Array.from(n),o=s[s.length-1],r=e.slice(o.length),i=this.$s.get(o);return void 0===i&&t({code:"STATE-302",message:`No parent path found for child path "${e}"`,context:{l:"ComponentStateBinding.toParentPathFromChildPath",Es:e,ks:o},t:"./docs/error-codes.md#state"}),i+r}Fs(e){const n=A(e).j.intersection(this.Ns);0===n.size&&t({code:"STATE-302",message:`No child path found for parent path "${e}"`,context:{l:"ComponentStateBinding.toChildPathFromParentPath",it:e},t:"./docs/error-codes.md#state"});const s=Array.from(n),o=s[s.length-1],r=e.slice(o.length),i=this.Ps.get(o);return void 0===i&&t({code:"STATE-302",message:`No child path found for parent path "${e}"`,context:{l:"ComponentStateBinding.toChildPathFromParentPath",it:e,ks:o},t:"./docs/error-codes.md#state"}),i+r}Vs(t){if(0===this.Ts.size)return null;const e=t.j.intersection(this.Ts);if(0===e.size)return null;{const t=Array.from(e);return t[t.length-1]}}bind(t,e){const n=t.Os(e);for(const t of n??[])this.Mn(t)}}class Fe{Ws;me;constructor(t,e){this.Ws=e,this.me=t}Hs(t){yt(this.me,(e=>{e.update(null,(e=>{for(const[n,s]of Object.entries(t)){const t=tt(A(n),null);e[H](t,s)}}))}))}P(e){yt(this.me,(n=>{for(const s of e){let e;try{e=this.Ws.Fs(s.info.pattern)}catch(t){continue}const o=A(e),r=o.dt-1,i=r>=0?s.St?.at(r)??null:null;r>=0&&null===i&&t({code:"LIST-201",message:`ListIndex not found for parent ref: ${s.info.pattern}`,context:{l:"ComponentStateInput.notifyRedraw",js:s.info.pattern,qs:o.pattern},t:"./docs/error-codes.md#list"});const c=tt(o,i);n.te(c)}}))}get(e,n,s){if(n===Wt)return this.Hs.bind(this);if(n===Ht)return this.P.bind(this);if("string"==typeof n){const t=tt(A(n),null);return this.me.getPropertyValue(t)}t({code:"STATE-204",message:`ComponentStateInput property not supported: ${String(n)}`,context:{l:"ComponentStateInput.get",oe:String(n)},t:"./docs/error-codes.md#state"})}set(e,n,s,o){if("string"==typeof n){const t=tt(A(n),null);return this.me.zs(t,s),!0}t({code:"STATE-204",message:`ComponentStateInput property not supported: ${String(n)}`,context:{l:"ComponentStateInput.set",oe:String(n)},t:"./docs/error-codes.md#state"})}}class Ve{u;Gs;Zs=new Set;constructor(t,e){this.u=t,this.Gs=e}get(e){const n=this.u.Vs(e.info);null===n&&t({code:"CSO-101",message:`Child path not found: ${e.info.pattern}`,context:{l:"ComponentStateOutput.get",path:e.info.pattern},t:"./docs/error-codes.md#cso"});const s=this.u.Us.get(n);void 0===s&&t({code:"CSO-102",message:`Child binding not registered: ${n}`,context:{l:"ComponentStateOutput.get",Es:n},t:"./docs/error-codes.md#cso"});const o=tt(A(this.u.Ds(e.info.pattern)),e.St??s.M.St);if(!this.Zs.has(o.info.pattern)){const t=this.Gs.Dt.Vt.has(e.info.pattern);s.kt.Dt.addPath(o.info.pattern,t),this.Zs.add(o.info.pattern)}return s.kt.getPropertyValue(o)}set(e,n){const s=this.u.Vs(e.info);null===s&&t({code:"CSO-101",message:`Child path not found: ${e.info.pattern}`,context:{l:"ComponentStateOutput.set",path:e.info.pattern},t:"./docs/error-codes.md#cso"});const o=this.u.Us.get(s);void 0===o&&t({code:"CSO-102",message:`Child binding not registered: ${s}`,context:{l:"ComponentStateOutput.set",Es:s},t:"./docs/error-codes.md#cso"});const r=tt(A(this.u.Ds(e.info.pattern)),e.St??o.M.St);if(!this.Zs.has(r.info.pattern)){const t=this.Gs.Dt.Vt.has(e.info.pattern);o.kt.Dt.addPath(r.info.pattern,t),this.Zs.add(r.info.pattern)}return o.kt.zs(r,n),!0}startsWith(t){return null!==this.u.Vs(t)}ie(e){const n=this.u.Vs(e.info);null===n&&t({code:"CSO-101",message:`Child path not found: ${e.info.pattern}`,context:{l:"ComponentStateOutput.getListIndexes",path:e.info.pattern},t:"./docs/error-codes.md#cso"});const s=this.u.Us.get(n);void 0===s&&t({code:"CSO-102",message:`Child binding not registered: ${n}`,context:{l:"ComponentStateOutput.getListIndexes",Es:n},t:"./docs/error-codes.md#cso"});const o=tt(A(this.u.Ds(e.info.pattern)),e.St);if(!this.Zs.has(o.info.pattern)){const t=this.Gs.Dt.Vt.has(e.info.pattern);s.kt.Dt.addPath(o.info.pattern,t),this.Zs.add(o.info.pattern)}return s.kt.ie(o)}}class Oe{type="autonomous";config;Js;styleSheet;Ks;state;hs;us;Qs=HTMLElement;re;Dt;Xs=Promise.withResolvers();Ys;zt;En;$e=new WeakMap;Pe=new Set;Ht=new Map;en=null;eo=null;no=null;so=!1;oo=0;ro=new WeakMap;constructor(t,e){this.config=t,this.config.Is&&(this.type="builtin");const n=e.constructor;var s;this.Js=n.Js,this.styleSheet=n.styleSheet,this.Ks=n.Ks,this.state=new this.Ks,this.hs=n.hs,this.us=n.us,this.re=e,this.En=new ke,this.Ys=function(t,e){const n=new Fe(t,e);return new Proxy({},n)}(this,this.En),this.zt=(s=this.En,new Ve(s,this)),this.Dt=n.Dt}get zn(){return null===this.en&&t({code:"BIND-201",message:"BindContent not initialized yet",context:{l:"ComponentEngine.bindContent.get",io:this.re.constructor.id},t:"./docs/error-codes.md#bind"}),this.en}get co(){return this.oo}De(){return++this.oo}do(){for(const t in this.state)$.has(t)||this.Dt.ao.has(t)||(this.Dt.ao.add(t),V(this.Dt.Be,t));const t=this.re.constructor,e=tt(A(""),null);this.en=_e(null,t.id,this,e)}connectedCallback(){if(this.config.lo)De(this.re,this.config,this.styleSheet);else{this.no=this.re.parentNode,this.eo=document.createComment("Structive block placeholder"),this.so=!0;try{this.re.replaceWith(this.eo)}finally{this.so=!1}}if(this.config.lo)this.zn.mount(this.re.shadowRoot??this.re);else{const e=this.no??t({code:"BIND-201",message:"Block parent node not set",context:{l:"ComponentEngine.connectedCallback",mode:"block"},t:"./docs/error-codes.md#bind"});this.zn.cn(e,this.eo)}if(this.re.dataset.state)try{const t=JSON.parse(this.re.dataset.state);this.Ys[Wt](t)}catch(e){t({code:"STATE-202",message:"Failed to parse state from dataset",context:{l:"ComponentEngine.connectedCallback",ho:this.re.dataset.state},t:"./docs/error-codes.md#state",i:e})}if(yt(this,(t=>{t.Oe((t=>{this.zn.A(),t.ve((()=>{this.zn.$(t)}))}))})),this.Dt.uo){const e=yt(this,(t=>t.update(null,(t=>t[j]()))));e instanceof Promise?e.finally((()=>{this.Xs.resolve()})).catch((()=>{t({code:"COMP-301",message:"Connected callback failed",context:{l:"ComponentEngine.connectedCallback"},t:"./docs/error-codes.md#comp"})})):this.Xs.resolve()}else this.Xs.resolve()}disconnectedCallback(){if(!this.so)try{this.Dt.fo&&yt(this,(t=>{t.update(null,(t=>{t[q]()}))}))}catch(e){t({code:"COMP-302",message:"Disconnected callback failed",context:{l:"ComponentEngine.disconnectedCallback"},t:"./docs/error-codes.md#comp",i:e})}finally{this.re.po?.mo(this.re),this.config.lo||(this.eo?.remove(),this.eo=null,this.no=null),yt(this,(t=>{t.Oe((()=>{this.zn.D()}))}))}}ie(t){if(this.zt.startsWith(t.info))return this.zt.ie(t);let e=null;return yt(this,(n=>e=n.ve((e=>e[G](t))))),e}getPropertyValue(t){let e;return yt(this,(n=>{e=n.ve((e=>e[W](t)))})),e}zs(t,e){yt(this,(n=>{n.update(null,(n=>{n[H](t,e)}))}))}Ln(t){this.Pe.add(t)}mo(t){this.Pe.delete(t)}Wt(t){return this.ro.get(t)?.wo??null}Kt(t,e){const n=this.ro.get(t);void 0===n?this.ro.set(t,{Ss:[],wo:e}):n.wo=e}Ne(t){return this.ro.get(t)?.Ss??[]}Fn(t,e){const n=this.ro.get(t);void 0===n?this.ro.set(t,{Ss:[e],wo:null}):n.Ss.push(e)}Vn(t,e){const n=this.ro.get(t);if(void 0!==n){const t=n.Ss.indexOf(e);t>=0&&n.Ss.splice(t,1)}}}const We=/\{\{([^}]+)\}\}/g;const He="http://www.w3.org/2000/svg";function je(t,e,n=t){let o=e;const r=o.getAttribute(B),i=s.debug?r??"":"";if(o.parentNode?.replaceChild(document.createComment(`${P}${t} ${i}`),o),o.namespaceURI===He){const t=document.createElement("template"),e=Array.from(o.childNodes);for(let n=0;n<e.length;n++){const s=e[n];t.content.appendChild(s)}t.setAttribute(B,r??""),o=t}return o.content.querySelectorAll("template").forEach((t=>{je(p(),t,n)})),Ne(t,o,n),t}function qe(e,n){const s=document.createElement("template");s.dataset.id=e.toString(),s.innerHTML=function(e){const n=[];return e.replaceAll(We,((e,s)=>{const o=s.trim(),[r]=o.split(":");if("if"!==r&&"for"!==r&&"endif"!==r&&"endfor"!==r&&"elseif"!==r&&"else"!==r)return`\x3c!--${U}${o}--\x3e`;const i=o.slice(r.length+1).trim(),c={type:r,xo:o,yo:i};if("if"===r||"for"===r)return n.push(c),`<template data-bind="${o}">`;if("endif"===r){const e=[];for(0===n.length&&t({code:"TMP-102",message:"Endif without if",context:{l:"Template.replaceMustacheWithTemplateTag",xo:o,bo:n.length},t:"./docs/error-codes.md#tmp"});n.length>0;){const s=n.pop();if("if"===s.type){e.push("</template>");break}"elseif"===s.type?e.push("</template>"):t({code:"TMP-102",message:"Endif without if",context:{l:"Template.replaceMustacheWithTemplateTag",So:s.type,xo:o},t:"./docs/error-codes.md#tmp"})}return e.join("")}if("endfor"===r){const e=n.pop()??t({code:"TMP-102",message:"Endfor without for",context:{l:"Template.replaceMustacheWithTemplateTag",xo:o,bo:n.length},t:"./docs/error-codes.md#tmp"});if("for"===e.type)return"</template>";t({code:"TMP-102",message:"Endfor without for",context:{l:"Template.replaceMustacheWithTemplateTag",So:e.type,xo:o},t:"./docs/error-codes.md#tmp"})}else if("elseif"===r){const e=n.at(-1)??t({code:"TMP-102",message:"Elseif without if",context:{l:"Template.replaceMustacheWithTemplateTag",xo:o,bo:n.length},t:"./docs/error-codes.md#tmp"});if("if"===e.type||"elseif"===e.type)return n.push(c),`</template><template data-bind="if:${e.yo}|not"><template data-bind="if:${i}">`;t({code:"TMP-102",message:"Elseif without if",context:{l:"Template.replaceMustacheWithTemplateTag",So:e.type,xo:o},t:"./docs/error-codes.md#tmp"})}else if("else"===r){const e=n.at(-1)??t({code:"TMP-102",message:"Else without if",context:{l:"Template.replaceMustacheWithTemplateTag",xo:o,bo:n.length},t:"./docs/error-codes.md#tmp"});return"if"===e.type?`</template><template data-bind="if:${e.yo}|not">`:t({code:"TMP-102",message:"Else without if",context:{l:"Template.replaceMustacheWithTemplateTag",So:e.type,xo:o},t:"./docs/error-codes.md#tmp"})}return t({code:"TMP-102",message:"Unreachable: All Mustache types should be handled by preceding branches",context:{l:"Template.replaceMustacheWithTemplateTag",xo:o,bo:n.length},t:"./docs/error-codes.md#tmp"})}))}(n),je(e,s)}const ze=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,Ge=/^[a-zA-Z_$][0-9a-zA-Z_$]*(\.[a-zA-Z_$][0-9a-zA-Z_$]*|\.\*)*$/;function Ze(e,n){const s={l:"StateProperty.createAccessorFunctions",pattern:e.pattern},o=new Set(e.H).intersection(n);let r=-1,i="";for(const t of o){const e=t.split(".");1!==e.length&&(e.length>r&&(r=e.length,i=t))}if(i.length>0){Ge.test(i)||t({code:"STATE-202",message:`Invalid path: ${i}`,context:{...s,Co:i},t:"./docs/error-codes.md#state"});const n=A(i),o=[];let r=n.dt;for(let c=n.O.length;c<e.O.length;c++){const n=e.O[c];"*"===n?(o.push(`[this.$${r+1}]`),r++):(ze.test(n)||t({code:"STATE-202",message:`Invalid segment name: ${n}`,context:{...s,vo:n,Co:i},t:"./docs/error-codes.md#state"}),o.push(`.${n}`))}const c=o.join(""),d=`this["${i}"]${c} = value;`;return{get:new Function("",`return this["${i}"]${c};`),set:new Function("value",d)}}{const n=[];let o=0;for(let r=0;r<e.O.length;r++){const i=e.O[r];"*"===i?(n.push(`[this.$${o+1}]`),o++):(ze.test(i)||t({code:"STATE-202",message:`Invalid segment name: ${i}`,context:{...s,vo:i},t:"./docs/error-codes.md#state"}),n.push((n.length>0?".":"")+i))}const r=n.join(""),i=`this.${r} = value;`;return{get:new Function("",`return this.${r};`),set:new Function("value",i)}}}class Je{ao=new Set;Vt=new Set;elements=new Set;Io=new Set;Ot=new Set;At=new Set;Yt=new Set;To=new Set;No=new Set;Bo=new Map;Le=new Map;Be=function(){return new D("","",0)}();uo=!1;fo=!1;Ve=!1;tn;Uo;Po=new Set;constructor(t){this.tn=t.id,this.Uo=t.Ks;const e=(t=>ve[t]??[])(this.tn),n=new Set;for(const t of e){const e=A(t);this.ao=this.ao.union(e.j);for(const t of e.j){const e=A(t);"*"===e.W&&n.add(e.it)}}const s=(t=>Ce[t]??[])(this.tn);this.Vt=this.Vt.union(s).union(n);for(const t of this.Vt){const e=`${t}.*`;this.elements.add(e)}let o=this.Uo.prototype;for(;o&&o!==Object.prototype;){const t=Object.getOwnPropertyDescriptors(o);if(t)for(const[e,n]of Object.entries(t)){if($.has(e))continue;if("function"==typeof n.value){this.Io.add(e),e===L&&(this.uo=!0),e===M&&(this.fo=!0),e===E&&(this.Ve=!0);continue}const t=void 0!==n.get,s=void 0!==n.set,o=A(e);this.ao=this.ao.union(o.j),t&&this.Ot.add(e),s&&this.Yt.add(e),t&&!s&&this.At.add(e),t&&s&&this.To.add(e)}o=Object.getPrototypeOf(o)}for(const t of this.ao){if(this.Ot.has(t))continue;if(this.Yt.has(t))continue;const e=A(t);if(1===e.O.length)continue;const n=Ze(e,this.Ot);Object.defineProperty(this.Uo.prototype,t,{get:n.get,set:n.set,enumerable:!0,configurable:!0}),this.No.add(t)}for(const t of this.ao){V(this.Be,t);const e=A(t);if(e.it){const n=this.Bo.get(e.it);void 0!==n?n.add(t):this.Bo.set(e.it,new Set([t]))}}}addPath(t,e=!1){const n=A(t);if(e&&!this.Vt.has(t)){this.Vt.add(t);const e=`${t}.*`;this.elements.add(e)}else"*"===n.W&&(this.elements.add(t),this.Vt.add(n.it));for(const t of n.j){if(this.ao.has(t))continue;this.ao.add(t),V(this.Be,t);const e=A(t);if("*"===e.W&&(this.elements.add(t),this.Vt.add(e.it)),e.O.length>1){const n=Ze(e,this.Ot);Object.defineProperty(this.Uo.prototype,t,{get:n.get,set:n.set,enumerable:!0,configurable:!0}),this.No.add(t)}if(e.it){const n=this.Bo.get(e.it);void 0!==n?n.add(t):this.Bo.set(e.it,new Set([t]))}}}Ft(t,e){const n=`${e}=>${t}`;if(this.Po.has(n))return;this.ao.has(e)||this.addPath(e),this.Po.add(n);const s=this.Le.get(e);void 0!==s?s.add(t):this.Le.set(e,new Set([t]))}}function Ke(e){const s=function(t){const e=n();return{lo:void 0===t.lo||t.lo,shadowDomMode:t.shadowDomMode??e.shadowDomMode,Is:t.Is??null}}(e.Ks.$o??{}),o=p(),{Lo:r,Mo:i,Ks:c}=e,d=Object.assign({},f),a=Object.assign({},u);c.Eo=!0,qe(o,r),x(o,i),function(t,e){g[t]=e}(o,c);const l=function(t){return t?document.createElement(t).constructor:HTMLElement}(s.Is),h=s.Is;return class extends l{static define(t){h?customElements.define(t,this,{Is:h}):customElements.define(t,this)}static get id(){return o}static _o=r;static get Lo(){return this._o}static set Lo(t){this._o=t,qe(this.id,t),this.Ro=null,this.Ao=null}static Do=i;static get Mo(){return this.Do}static set Mo(t){this.Do=t,x(this.id,t),this.ko=null}static Ro=null;static get Js(){return this.Ro||(this.Ro=Be(this.id)),this.Ro}static ko=null;static get styleSheet(){return this.ko||(this.ko=function(e){return w[e]??t({code:"CSS-001",message:`Stylesheet not found: ${e}`,context:{l:"StyleSheet.getStyleSheetById",Fo:e},t:"./docs/error-codes.md#css"})}(this.id)),this.ko}static Uo=null;static get Ks(){return this.Uo||(this.Uo=function(e){return g[e]??t({code:"STATE-101",message:`StateClass not found: ${e}`,context:{l:"StateClass.getStateClassById",Vo:e},t:"./docs/error-codes.md#state"})}(this.id)),this.Uo}static Oo=d;static get hs(){return this.Oo}static Wo=a;static get us(){return this.Wo}static Ao=null;static get Dt(){return this.Ao||(this.Ao=new Je(this)),this.Ao}me;Ho;constructor(){super(),this.me=function(t,e){return new Oe(t,e)}(s,this),this.me.do()}connectedCallback(){this.me.connectedCallback()}disconnectedCallback(){this.me.disconnectedCallback()}get po(){var t;return void 0===this.Ho&&(this.Ho=(t=this,jt.get(t)??null)),this.Ho}get state(){return this.me.Ys}get En(){return this.me.En}get jo(){return this.me.Ks.Eo??!1}get Xs(){return this.me.Xs}Os(t){return this.me.$e.get(t)??null}Ln(t){this.me.Ln(t)}mo(t){this.me.mo(t)}}}function Qe(t){return t.replaceAll(/<!--\{\{([^}]+)}}-->/g,((t,e)=>`{{${e}}}`))}function Xe(t,e,n){if(!s.debug)return;const o=n?` (${n})`:"";console.warn(`[Structive][SFC] Missing <${t}> section in ${e}${o}`)}let Ye=0;async function tn(e){const n=import.meta.resolve?import.meta.resolve(e):e,s="./docs/error-codes.md#imp-202-component-load-failed";let o="";try{const r=await fetch(n);r.ok||t({code:"IMP-202",message:`Failed to load component from ${e}`,context:{l:"WebComponents.loadSingleFileComponent",path:e,qo:n,status:r.status,statusText:r.statusText,url:r.url},hint:"Make sure the import map entry points to a reachable SFC and the server returns a 2xx status.",t:s}),o=await r.text()}catch(o){t({code:"IMP-202",message:`Failed to load component from ${e}`,context:{l:"WebComponents.loadSingleFileComponent",path:e,qo:n},hint:"Confirm the SFC path is correct and accessible before bootstrapping.",t:s,i:o})}return async function(t,e){const n=document.createElement("template");n.innerHTML=function(t){return t.replaceAll(/\{\{([^}]+)\}\}/g,((t,e)=>`\x3c!--{{${e}}}--\x3e`))}(e);const s=n.content.querySelector("template");s||Xe("template",t),s?.remove();const o=n.content.querySelector("script[type=module]");let r={};if(o){const e=`\n// uniq id: ${Ye++}\n//# sourceURL=${t}\n`;if("function"==typeof URL.createObjectURL){const t=new Blob([o.text+e],{type:"application/javascript"}),n=URL.createObjectURL(t);try{r=await import(n)}finally{URL.revokeObjectURL(n)}}else{const t=btoa(String.fromCodePoint(...(new TextEncoder).encode(o.text+e)));r=await import(`data:application/javascript;base64,${t}`)}}else Xe("script",t,'expects <script type="module">');o?.remove();const i=n.content.querySelector("style");i||Xe("style",t),i?.remove();const c=r.default??class{};return{text:e,Lo:Qe(s?.innerHTML??"").trim(),Mo:i?.textContent??"",Ks:c}}(e,o)}function en(t,e){e.define(t)}const nn="@routes/",sn="@components/",on="#lazy",rn={};async function cn(){const t=function(){const t={};return document.querySelectorAll("script[type='importmap']").forEach((e=>{const n=JSON.parse(e.innerHTML);n.imports&&(t.imports=Object.assign(t.imports||{},n.imports))})),t}();if(t.imports){const e=new Map;for(const[n,s]of Object.entries(t.imports)){let t,s;if(n.startsWith(nn)){s=n.endsWith(on);const e=n.slice(7,s?-5:void 0);t=`routes${e.replace(/:[^\s/]+/g,"").replace(/\//g,"-")}`,fn(t,"/root"===e?"/":e)}n.startsWith(sn)&&(s=n.endsWith(on),t=n.slice(12,s?-5:void 0)),t&&(s?rn[t]=n:e.set(t,n))}for(const[t,n]of e.entries()){en(t,Ke(await tn(n)))}}}function dn(e){const n=rn[e];if(n)delete rn[e],queueMicrotask((()=>{tn(n).then((t=>{const n=Ke(t);en(e,n)})).catch((s=>{t({code:"IMP-202",message:`Failed to load lazy component for tagName: ${e}`,context:{l:"WebComponents.loadFromImportMap.loadLazyLoadComponent",tagName:e,zo:n,Go:s instanceof Error?s.message:String(s)},t:"./docs/error-codes.md#imp",o:"error"})}))}));else{const t={code:"IMP-201",message:`Alias not found for tagName: ${e}`,context:{l:"loadFromImportMap.loadLazyLoadComponent",tagName:e},t:"./docs/error-codes.md#imp",o:"warn"};console.warn(t.message,{code:t.code,context:t.context,t:t.t,o:t.o})}}const an="routes:",ln=[];let hn=null;class un extends HTMLElement{Zo=window.location.pathname.split("/").pop()||"";Jo=document.querySelector("base")?.href.replace(window.location.origin,"")||"/";Ko;constructor(){super(),this.Ko=this.Qo.bind(this)}connectedCallback(){hn=this,this.innerHTML='<slot name="content"></slot>',window.addEventListener("popstate",this.Ko),window.dispatchEvent(new Event("popstate"))}disconnectedCallback(){window.removeEventListener("popstate",this.Ko),hn=null}Qo(t){t.preventDefault(),this.Ie()}navigate(t){const e="/"===t[0]?this.Jo+t.slice(1):t;history.pushState({},"",e),this.Ie()}Ie(){Array.from(this.childNodes).filter((t=>"content"===t.getAttribute?.("slot"))).forEach((t=>this.removeChild(t)));const t=window.location.pathname.split("/");t.at(-1)===this.Zo&&(t[t.length-1]="");const e=t.join("/").replace(this.Jo,""),n="/"!==e[0]?`/${e}`:e;let s;const o={};for(const[t,e]of ln){const r=new RegExp(`^${t.replace(/:[^\s/]+/g,"([^/]+)")}$`);if(r.test(n)){s=e;const i=n.match(r);if(i){(t.match(/:[^\s/]+/g)||[]).forEach(((t,e)=>{o[t.substring(1)]=i[e+1]}))}break}}if(s){const t=document.createElement(s);t.setAttribute("data-state",JSON.stringify(o)),t.setAttribute("slot","content"),this.appendChild(t),function(t){return t in rn}(s)&&dn(s)}else{const t=document.createElement("h1");t.setAttribute("slot","content"),t.textContent="404 Not Found",this.appendChild(t)}}}function fn(t,e){let n;n=e.startsWith(an)?e.substring(an.length):e,ln.push([n,t])}const mn="router",pn=`<slot name="${mn}"></slot>`;class gn extends HTMLElement{constructor(){super(),"none"!==s.shadowDomMode&&this.attachShadow({mode:"open"})}async connectedCallback(){await this.Xo(),this.Ie()}get root(){return this.shadowRoot??this}async Xo(){if(s.layoutPath){const e=await fetch(s.layoutPath);if(e.ok){const t=await e.text(),n=document.createElement("template");n.innerHTML=t;const s=n.content.querySelector("template"),o=n.content.querySelector("style");if(this.root.appendChild(s?.content??document.createDocumentFragment()),o){const t=this.shadowRoot??document,e=t.adoptedStyleSheets;e.includes(o)||(t.adoptedStyleSheets=[...e,o])}}else t({code:"TMP-101",message:`Failed to load layout from ${s.layoutPath}`,context:{l:"MainWrapper.loadLayout",layoutPath:s.layoutPath},t:"./docs/error-codes.md#tmp"})}else this.root.innerHTML=pn}Ie(){if(s.enableRouter){const t=document.createElement(s.routerTagName);t.setAttribute("slot",mn),this.root.appendChild(t)}}}const wn=s;let xn=!1;async function yn(t){await async function(t){for(const[e,n]of Object.entries(t)){let t=null;if(s.enableRouter){const t=n.startsWith("@routes")?n.slice(7):n;fn(e,"/root"===t?"/":t)}t=await tn(n),en(e,Ke(t))}}(t),wn.autoInit&&await bn()}async function bn(){xn||(await async function(){if(s.autoLoadFromImportMap&&await cn(),s.enableRouter&&customElements.define(s.routerTagName,un),s.enableMainWrapper&&(customElements.define(s.mainTagName,gn),s.autoInsertMainWrapper)){const t=document.createElement(s.mainTagName);document.body.appendChild(t)}}(),xn=!0)}export{bn as bootstrapStructive,wn as config,yn as defineComponents};
//# sourceMappingURL=structive.esm.min.js.map
